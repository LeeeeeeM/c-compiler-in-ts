# CPCç¼–è¯‘å™¨å®Œæ•´ç¼–è¯‘è¿‡ç¨‹åˆ†æž

## ðŸ“Š å®žé™…åœ°å€è¯´æ˜Ž

**é‡è¦è¯´æ˜Ž**ï¼šæœ¬æ–‡æ¡£ä¸­çš„åœ°å€åŸºäºŽå®žé™…è¿è¡Œ `./cpc example/test.c` ç”Ÿæˆçš„ `assemble` æ–‡ä»¶ï¼š

- **ä»£ç æ®µåœ°å€**ï¼šåŸºäºŽ `assemble` æ–‡ä»¶ä¸­çš„å®žé™…åœ°å€
  - **test_func å‡½æ•°åœ°å€**ï¼š`5369790472` (ç¬¬1è¡Œ)
  - **main å‡½æ•°åœ°å€**ï¼š`5369791360` (ç¬¬80è¡Œ)  
- **æ•°æ®æ®µåœ°å€**ï¼šä½¿ç”¨ `0x2000` ä½œä¸ºèµ·å§‹åœ°å€ï¼ˆç¤ºä¾‹å‡è®¾ï¼‰
  - **å…¨å±€å˜é‡ a1**ï¼š`0x2000`
  - **å…¨å±€å˜é‡ a3**ï¼š`0x2008`

**åœ°å€åˆ†é…æœºåˆ¶**ï¼š
1. ä»£ç æ®µåœ°å€ç”± `malloc()` åŠ¨æ€åˆ†é…ï¼Œè®°å½•åœ¨ `assemble` æ–‡ä»¶ä¸­
2. æ•°æ®æ®µåœ°å€ä½¿ç”¨ `0x2000` ä½œä¸ºç¤ºä¾‹èµ·å§‹åœ°å€
3. å±€éƒ¨å˜é‡é€šè¿‡æ ˆåç§»è®¿é—® (`LEA -1`, `LEA -2` ç­‰)
4. æ¯æ¬¡è¿è¡Œä»£ç æ®µåœ°å€å¯èƒ½ä¸åŒï¼Œä½†ç›¸å¯¹å…³ç³»ä¿æŒä¸€è‡´

---

## ðŸŽ¯ ç¼–è¯‘è¿‡ç¨‹æ¦‚è¿°

CPCç¼–è¯‘å™¨çš„æ ¸å¿ƒè¿‡ç¨‹å°±æ˜¯ï¼š**è¯æ³•åˆ†æž â†’ æž„å»ºç¬¦å·è¡¨ â†’ åŒæ—¶å¡«å……æ•°æ®æ®µå’Œä»£ç æ®µ**

## ðŸ“Š ç¼–è¯‘è¿‡ç¨‹çš„ä¸‰ä¸ªé˜¶æ®µ

### é˜¶æ®µ1ï¼šè¯æ³•åˆ†æžï¼ˆLexical Analysisï¼‰
### é˜¶æ®µ2ï¼šç¬¦å·è¡¨æž„å»ºï¼ˆSymbol Table Constructionï¼‰
### é˜¶æ®µ3ï¼šä»£ç ç”Ÿæˆï¼ˆCode Generationï¼‰

---

## ðŸ” é˜¶æ®µ1ï¼šè¯æ³•åˆ†æžï¼ˆtokenizeå‡½æ•°ï¼‰

### ðŸ“ è¯æ³•åˆ†æžçš„ä½œç”¨
- **è¯†åˆ«æ ‡è¯†ç¬¦**ï¼šå˜é‡åã€å‡½æ•°åã€å…³é”®å­—
- **è¯†åˆ«æ•°å­—**ï¼šåè¿›åˆ¶ã€åå…­è¿›åˆ¶ã€å…«è¿›åˆ¶
- **è¯†åˆ«å­—ç¬¦ä¸²å’Œå­—ç¬¦**ï¼šå­—ç¬¦ä¸²å­—é¢é‡ã€å­—ç¬¦å­—é¢é‡
- **è¯†åˆ«æ“ä½œç¬¦**ï¼šç®—æœ¯ã€é€»è¾‘ã€æ¯”è¾ƒæ“ä½œç¬¦
- **è·³è¿‡æ³¨é‡Šå’Œå®**ï¼šé¢„å¤„ç†æŒ‡ä»¤

### ðŸ”„ è¯æ³•åˆ†æžæµç¨‹

```c
void tokenize() {
    char* ch_ptr;
    while((token = *src++)) {
        if (token == '\n') line++;
        // skip marco
        else if (token == '#') while (*src != 0 && *src != '\n') src++;
        // handle symbol
        else if ((token >= 'a' && token <= 'z') || (token >= 'A' && token <= 'Z') || (token == '_')) {
            ch_ptr = src - 1;
            while ((*src >= 'a' && *src <= 'z') || (*src >= 'A' && *src <= 'Z')
                    || (*src >= '0' && *src <= '9') || (*src == '_'))
                token = token * 147 + *src++;
            token = (token << 6) + (src - ch_ptr);
            symbol_ptr = symbol_table;
            // search same symbol in table
            while(symbol_ptr[Token]) {
                if (token == symbol_ptr[Hash] && !memcmp((char*)symbol_ptr[Name], ch_ptr, src - ch_ptr)) {
                    token = symbol_ptr[Token];
                    return;
                }
                symbol_ptr = symbol_ptr + SymSize;
            }
            // add new symbol
            symbol_ptr[Name] = (int)ch_ptr;
            symbol_ptr[Hash] = token;
            token = symbol_ptr[Token] = Id;
            return;
        }
        // handle number
        else if (token >= '0' && token <= '9') {
            // DEC, ch_ptr with 1 - 9
            if ((token_val = token - '0'))
                while (*src >= '0' && *src <= '9') token_val = token_val * 10 + *src++ - '0';
            //HEX, ch_ptr with 0x
            else if (*src == 'x' || *src == 'X')
                while ((token = *++src) && ((token >= '0' && token <= '9') || (token >= 'a' && token <= 'f')
                        || (token >= 'A' && token <= 'F')))
                    token_val = token_val * 16 + (token & 0xF) + (token >= 'A' ? 9 : 0);
            // OCT, start with 0
            else while (*src >= '0' && *src <= '7') token_val = token_val * 8 + *src++ - '0';
            token = Num;
            return;
        }
        // handle string & char
        else if (token == '"' || token == '\'') {
            // ... å­—ç¬¦ä¸²å’Œå­—ç¬¦å¤„ç†
        }
        // ... å…¶ä»–æ“ä½œç¬¦å¤„ç†
    }
}
```

### ðŸŽ¯ è¯æ³•åˆ†æžçš„å…³é”®ç‰¹ç‚¹

1. **å“ˆå¸Œè®¡ç®—**ï¼šä½¿ç”¨ `token * 147 + *src++` è®¡ç®—æ ‡è¯†ç¬¦å“ˆå¸Œ
2. **ç¬¦å·æŸ¥æ‰¾**ï¼šåœ¨ç¬¦å·è¡¨ä¸­æŸ¥æ‰¾å·²å­˜åœ¨çš„ç¬¦å·
3. **æ–°ç¬¦å·æ·»åŠ **ï¼šå°†æ–°æ ‡è¯†ç¬¦æ·»åŠ åˆ°ç¬¦å·è¡¨
4. **æ•°å­—è§£æž**ï¼šæ”¯æŒåè¿›åˆ¶ã€åå…­è¿›åˆ¶ã€å…«è¿›åˆ¶

---

## ðŸ—ï¸ é˜¶æ®µ2ï¼šç¬¦å·è¡¨æž„å»ºï¼ˆSymbol Table Constructionï¼‰

### ðŸ“ ç¬¦å·è¡¨çš„ä½œç”¨
- **å­˜å‚¨ç¬¦å·ä¿¡æ¯**ï¼šåç§°ã€ç±»åž‹ã€ä½œç”¨åŸŸã€å€¼
- **ç®¡ç†ä½œç”¨åŸŸ**ï¼šå¤„ç†å˜é‡é®è”½
- **ç±»åž‹æ£€æŸ¥**ï¼šç¡®ä¿ç±»åž‹æ­£ç¡®æ€§
- **ä»£ç ç”Ÿæˆæ”¯æŒ**ï¼šä¸ºä»£ç ç”Ÿæˆæä¾›ä¿¡æ¯

### ðŸ”„ ç¬¦å·è¡¨æž„å»ºæµç¨‹

#### 2.1 å…³é”®å­—åˆå§‹åŒ–ï¼ˆkeywordå‡½æ•°ï¼‰

```c
void keyword() {
    int i;
    src = "char int enum if else return sizeof while "
        "open read close printf malloc free memset memcmp exit void main";
    // add keywords to symbol table
    i = Char; while (i <= While) {tokenize(); symbol_ptr[Token] = i++;}
    // add Native CALL to symbol table
    i = OPEN; while (i <= EXIT) {
        tokenize();
        symbol_ptr[Class] = Sys;
        symbol_ptr[Type] = INT;
        symbol_ptr[Value] = i++;
    }
    tokenize(); symbol_ptr[Token] = Char; // handle void type
    tokenize(); main_ptr = symbol_ptr; // keep track of main
    src = src_dump;
}
```

**å…³é”®å­—åˆå§‹åŒ–ç»“æžœ**ï¼š
| ç´¢å¼• | Token | Hash | Name | Class | Type | Value | GClass | GType | GValue |
|------|-------|------|------|-------|------|-------|--------|-------|--------|
| 0 | Char | hash("char") | "char" | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | Int | hash("int") | "int" | 0 | 0 | 0 | 0 | 0 | 0 |
| ... | ... | ... | ... | ... | ... | ... | ... | ... | ... |
| 8 | OPEN | hash("open") | "open" | Sys | INT | OPEN | 0 | 0 | 0 |
| 9 | READ | hash("read") | "read" | Sys | INT | READ | 0 | 0 | 0 |
| ... | ... | ... | ... | ... | ... | ... | ... | ... | ... |

#### 2.2 å…¨å±€å˜é‡å®šä¹‰

```c
// å…¨å±€å˜é‡å®šä¹‰
int global_var;
char global_char;
```

**ç¬¦å·è¡¨æ›´æ–°**ï¼š
| ç´¢å¼• | Token | Hash | Name | Class | Type | Value | GClass | GType | GValue |
|------|-------|------|------|-------|------|-------|--------|-------|--------|
| 19 | Id | hash("global_var") | "global_var" | Glo | INT | 0x2000 | 0 | 0 | 0 |
| 20 | Id | hash("global_char") | "global_char" | Glo | CHAR | 0x2008 | 0 | 0 | 0 |

**å…³é”®æ“ä½œ**ï¼š
```c
symbol_ptr[Class] = Glo;
symbol_ptr[Value] = (int)data;  // æ•°æ®æ®µåœ°å€
data = data + 8; // ä¸ºä¸‹ä¸€ä¸ªå˜é‡é¢„ç•™ç©ºé—´
```

#### 2.3 å‡½æ•°å®šä¹‰

```c
int outer_func(int global_var) {
    // å‡½æ•°ä½“
}
```

**ç¬¦å·è¡¨æ›´æ–°**ï¼š
| ç´¢å¼• | Token | Hash | Name | Class | Type | Value | GClass | GType | GValue |
|------|-------|------|------|-------|------|-------|--------|-------|--------|
| 21 | Id | hash("outer_func") | "outer_func" | Fun | INT | 0x1100 | 0 | 0 | 0 |

**å…³é”®æ“ä½œ**ï¼š
```c
symbol_ptr[Class] = Fun;
symbol_ptr[Value] = (int)(code + 1);  // ä»£ç æ®µåœ°å€
```

#### 2.4 å±€éƒ¨å˜é‡å®šä¹‰

```c
int local_var;
int global_char;  // å±€éƒ¨å˜é‡é®è”½å…¨å±€å˜é‡
```

**ç¬¦å·è¡¨æ›´æ–°**ï¼š
| ç´¢å¼• | Token | Hash | Name | Class | Type | Value | GClass | GType | GValue |
|------|-------|------|------|-------|------|-------|--------|-------|--------|
| 19 | Id | hash("global_var") | "global_var" | Loc | INT | 0 | Glo | INT | 0x2000 |
| 20 | Id | hash("global_char") | "global_char" | Loc | CHAR | 2 | Glo | CHAR | 0x2008 |
| 22 | Id | hash("local_var") | "local_var" | Loc | INT | 1 | 0 | 0 | 0 |

**å…³é”®æ“ä½œ**ï¼š
```c
hide_global();  // å¤‡ä»½å…¨å±€å˜é‡ä¿¡æ¯
symbol_ptr[Class] = Loc;
symbol_ptr[Value] = ++i;  // æ ˆå¸§åç§»
```

---

## ðŸŽ¯ é˜¶æ®µ3ï¼šä»£ç ç”Ÿæˆï¼ˆCode Generationï¼‰

### ðŸ“ ä»£ç ç”Ÿæˆçš„ä½œç”¨
- **ç”ŸæˆVMæŒ‡ä»¤**ï¼šå°†è¯­æ³•æ ‘è½¬æ¢ä¸ºVMæŒ‡ä»¤
- **å¡«å……ä»£ç æ®µ**ï¼šå°†æŒ‡ä»¤å†™å…¥ä»£ç æ®µ
- **å¡«å……æ•°æ®æ®µ**ï¼šå°†å…¨å±€å˜é‡å†™å…¥æ•°æ®æ®µ
- **ç”Ÿæˆæ ˆå¸§**ï¼šä¸ºå±€éƒ¨å˜é‡åˆ†é…æ ˆç©ºé—´

### ðŸ”„ ä»£ç ç”Ÿæˆæµç¨‹

#### 3.1 å‡½æ•°è°ƒç”¨ä»£ç ç”Ÿæˆ

```c
// å‡½æ•°è°ƒç”¨ï¼šouter_func(5)
*++code = CALL; *++code = (int)(symbol_ptr[Value]);  // CALL 0x1100
*++code = DARG; *++code = 1;  // DARG 1
```

**ç”Ÿæˆçš„æŒ‡ä»¤**ï¼š
```
CALL 0x1100  // è°ƒç”¨outer_funcå‡½æ•°
DARG 1       // æ¸…ç†1ä¸ªå‚æ•°
```

#### 3.2 å±€éƒ¨å˜é‡è®¿é—®ä»£ç ç”Ÿæˆ

```c
// å±€éƒ¨å˜é‡è®¿é—®ï¼šlocal_var
if (tmp_ptr[Class] == Loc) {
    *++code = LEA; 
    *++code = ibp - tmp_ptr[Value];  // LEA -1
}
```

**ç”Ÿæˆçš„æŒ‡ä»¤**ï¼š
```
LEA -1  // åŠ è½½local_varçš„åœ°å€
```

#### 3.3 å…¨å±€å˜é‡è®¿é—®ä»£ç ç”Ÿæˆ

```c
// å…¨å±€å˜é‡è®¿é—®ï¼šglobal_var
else if (tmp_ptr[Class] == Glo) {
    *++code = IMM; 
    *++code = tmp_ptr[Value];  // IMM 0x2000
}
```

**ç”Ÿæˆçš„æŒ‡ä»¤**ï¼š
```
IMM 0x2000  // åŠ è½½global_varçš„åœ°å€
```

#### 3.4 æ ˆå¸§åˆ›å»ºä»£ç ç”Ÿæˆ

```c
// æ ˆå¸§åˆ›å»º
*++code = NVAR;
*++code = i - ibp;  // æ ˆå¸§å¤§å°
```

**ç”Ÿæˆçš„æŒ‡ä»¤**ï¼š
```
NVAR 2  // åˆ›å»ºå¤§å°ä¸º2çš„æ ˆå¸§
```

---

## ðŸ“Š å®Œæ•´ç¼–è¯‘è¿‡ç¨‹ç¤ºä¾‹

### ç¤ºä¾‹ä»£ç 
```c
// å¤šå±‚å˜é‡é®è”½ç¤ºä¾‹
int a1;
int a3;

int test_func(int a1) {  // å‚æ•°é®è”½å…¨å±€å˜é‡
    int a2;
    int a3;  // å±€éƒ¨å˜é‡é®è”½å…¨å±€å˜é‡
    
    a3 = 40;
    a2 = a1 + 1;
    
    {
        a1 = 20;
        a2 = a1 + 1;
        printf("inner: a1=%d, a2=%d, a3=%d\n", a1, a2, a3);
        {
            a1 = 30;
            a2 = a1 + 1;
            printf("inner: a1=%d, a2=%d, a3=%d\n", a1, a2, a3);
        }
    }
    printf("outer: a1=%d, a2=%d, a3=%d\n", a1, a2, a3);
    
    return a2;
}

int main() {
    int a1;  // å±€éƒ¨å˜é‡é®è”½å…¨å±€å˜é‡
    int result1;
    
    a1 = 10;
    
    printf("main: a1=%d\n", a1);
    
    result1 = test_func(5);
    
    printf("Results: result1=%d\n", result1);
    printf("a1=%d\n", a1);
    
    return 0;
}
```

### ç¼–è¯‘è¿‡ç¨‹

#### æ­¥éª¤1ï¼šå…³é”®å­—åˆå§‹åŒ–
```
ç¬¦å·è¡¨ï¼š[å…³é”®å­—] + [ç³»ç»Ÿè°ƒç”¨]
```

#### æ­¥éª¤2ï¼šå…¨å±€å˜é‡å®šä¹‰
```
ç¬¦å·è¡¨ï¼š[å…³é”®å­—] + [ç³»ç»Ÿè°ƒç”¨] + [a1, a3]
æ•°æ®æ®µï¼š[a1: 0x2000] + [a3: 0x2008]
```

#### æ­¥éª¤3ï¼štest_funcå‡½æ•°å®šä¹‰
```
ç¬¦å·è¡¨ï¼š[å…³é”®å­—] + [ç³»ç»Ÿè°ƒç”¨] + [a1, a3] + [test_func]
ä»£ç æ®µï¼š[test_func: 0x1100]
```

#### æ­¥éª¤4ï¼štest_funcå±€éƒ¨å˜é‡å®šä¹‰
```
ç¬¦å·è¡¨ï¼š[å…³é”®å­—] + [ç³»ç»Ÿè°ƒç”¨] + [a1(é®è”½), a3(é®è”½)] + [test_func] + [a2]
```

#### æ­¥éª¤5ï¼štest_funcä»£ç ç”Ÿæˆ
```
ä»£ç æ®µï¼š[test_func: 0x1100] + [NVAR 2, IMM 40, SI, LEA -1, LI, ADD, SI, ...]
```

#### æ­¥éª¤6ï¼šmainå‡½æ•°å®šä¹‰
```
ç¬¦å·è¡¨ï¼š[å…³é”®å­—] + [ç³»ç»Ÿè°ƒç”¨] + [a1, a3] + [test_func] + [main]
ä»£ç æ®µï¼š[test_func: 0x1100] + [main: 0x1200]
```

#### æ­¥éª¤7ï¼šmainå±€éƒ¨å˜é‡å®šä¹‰
```
ç¬¦å·è¡¨ï¼š[å…³é”®å­—] + [ç³»ç»Ÿè°ƒç”¨] + [a1(é®è”½), a3] + [test_func] + [main] + [result1]
```

#### æ­¥éª¤8ï¼šmainä»£ç ç”Ÿæˆ
```
ä»£ç æ®µï¼š[test_func: 0x1100] + [main: 0x1200] + [NVAR 2, IMM 10, SI, LEA -2, PUSH, IMM 5, PUSH, CALL 0x1100, DARG 1, SI, ...]
```

---

## ðŸŽ¯ ç¼–è¯‘è¿‡ç¨‹çš„å…³é”®ç‰¹ç‚¹

### 1. åŒæ­¥è¿›è¡Œ
- **è¯æ³•åˆ†æž**ï¼šè¯†åˆ«ç¬¦å·
- **ç¬¦å·è¡¨æž„å»º**ï¼šå­˜å‚¨ç¬¦å·ä¿¡æ¯
- **ä»£ç ç”Ÿæˆ**ï¼šç”ŸæˆæŒ‡ä»¤

### 2. å†…å­˜ç®¡ç†
- **æ•°æ®æ®µ**ï¼šå­˜å‚¨å…¨å±€å˜é‡
- **ä»£ç æ®µ**ï¼šå­˜å‚¨VMæŒ‡ä»¤
- **æ ˆæ®µ**ï¼šè¿è¡Œæ—¶åˆ†é…

### 3. ä½œç”¨åŸŸç®¡ç†
- **hide_global()**ï¼šå¤‡ä»½å…¨å±€å˜é‡ä¿¡æ¯
- **recover_global()**ï¼šæ¢å¤å…¨å±€å˜é‡ä¿¡æ¯

### 4. åœ°å€è®¡ç®—
- **å…¨å±€å˜é‡**ï¼šæ•°æ®æ®µåœ°å€
- **å‡½æ•°**ï¼šä»£ç æ®µåœ°å€
- **å±€éƒ¨å˜é‡**ï¼šæ ˆå¸§åç§»

### 5. å˜é‡é®è”½çš„æœ¬è´¨
- **ä»£ç æ®µ**ï¼šå­˜å‚¨æŒ‡ä»¤ï¼Œä¸ä¼šå› ä¸ºå˜é‡é®è”½è€Œæ”¹å˜
- **æ•°æ®æ®µ**ï¼šå­˜å‚¨å…¨å±€å˜é‡ï¼Œä¼šè¢«å±€éƒ¨å˜é‡é®è”½
- **æ ˆæ®µ**ï¼šå­˜å‚¨å±€éƒ¨å˜é‡ï¼Œé€šè¿‡æ ˆåç§»è®¿é—®
- **ç¬¦å·è¡¨**ï¼šå†³å®šè®¿é—®å“ªä¸ªå†…å­˜æ®µï¼ˆæ•°æ®æ®µ vs æ ˆæ®µï¼‰

**å˜é‡é®è”½çš„å†…å­˜è®¿é—®æœºåˆ¶**ï¼š
```
æ²¡æœ‰é®è”½æ—¶ï¼š
a1 â†’ ç¬¦å·è¡¨ â†’ Value = 0x2000 â†’ è®¿é—®æ•°æ®æ®µ

æœ‰é®è”½æ—¶ï¼š
a1 â†’ ç¬¦å·è¡¨ â†’ Value = 0 (æ ˆåç§») â†’ è®¿é—®æ ˆæ®µ
```

**å…³é”®ç†è§£**ï¼š
- å˜é‡é®è”½é’ˆå¯¹çš„æ˜¯**æ•°æ®æ®µ**ï¼Œå’Œ**ä»£ç æ®µ**æ— å…³
- ä»£ç æ®µåªæ˜¯æ ¹æ®ç¬¦å·è¡¨çš„ä¿¡æ¯æ¥å†³å®šè®¿é—®å“ªä¸ªå†…å­˜ä½ç½®
- å±€éƒ¨å˜é‡é€šè¿‡æ ˆåç§»è®¿é—®ï¼Œå…¨å±€å˜é‡é€šè¿‡æ•°æ®æ®µåœ°å€è®¿é—®

**å†…å­˜è®¿é—®æœºåˆ¶æ€»ç»“**ï¼š
- **å…¨å±€å˜é‡ï¼ˆæ•°æ®æ®µï¼‰**ï¼šå­˜å‚¨åœ¨æ•°æ®æ®µï¼Œé€šè¿‡ `IMM` æŒ‡ä»¤ç›´æŽ¥åŠ è½½åœ°å€è®¿é—®
- **å±€éƒ¨å˜é‡ï¼ˆæ ˆæ®µï¼‰**ï¼šå­˜å‚¨åœ¨æ ˆæ®µï¼Œé€šè¿‡ `LEA` æŒ‡ä»¤è®¡ç®—æ ˆåç§»è®¿é—®
- **ä»£ç æ®µæŒ‡ä»¤**ï¼šå†³å®šè®¿é—®å“ªä¸ªå†…å­˜ä½ç½®ï¼ˆæ•°æ®æ®µ vs æ ˆæ®µï¼‰
- **ç¬¦å·è¡¨**ï¼šæä¾›è®¿é—®ä¿¡æ¯ï¼ˆåœ°å€ vs åç§»ï¼‰

**å†…å­˜è®¿é—®æµç¨‹**ï¼š
```
å˜é‡è®¿é—® â†’ ç¬¦å·è¡¨æŸ¥æ‰¾ â†’ æ ¹æ®Classå†³å®šè®¿é—®æ–¹å¼
â”œâ”€â”€ Class = Glo â†’ IMM + æ•°æ®æ®µåœ°å€
â””â”€â”€ Class = Loc â†’ LEA + æ ˆåç§»
```

**å…³é”®ç‰¹ç‚¹**ï¼š
- é™¤äº†å…¨å±€çš„æ•°æ®æ®µå˜é‡ï¼Œæ ˆå†…çš„æ•°æ®è®¿é—®éƒ½æ˜¯é€šè¿‡ä»£ç æ®µçš„æŒ‡ä»¤æ¥æ“ä½œçš„
- `IMM` æŒ‡ä»¤ä¸ä»…åŠ è½½æ•°æ®æ®µåœ°å€ï¼Œè¿˜åŠ è½½å¸¸é‡å€¼ã€å­—ç¬¦ä¸²åœ°å€ã€å‡½æ•°åœ°å€ç­‰
- `LEA` æŒ‡ä»¤ä¸“é—¨ç”¨äºŽè®¡ç®—æ ˆåç§»ï¼Œè®¿é—®å±€éƒ¨å˜é‡

---

## ðŸ“ˆ æ€»ç»“

**CPCç¼–è¯‘å™¨çš„æ ¸å¿ƒè¿‡ç¨‹**ï¼š

1. **è¯æ³•åˆ†æž**ï¼šè¯†åˆ«æ ‡è¯†ç¬¦ã€æ•°å­—ã€æ“ä½œç¬¦
2. **ç¬¦å·è¡¨æž„å»º**ï¼šå­˜å‚¨ç¬¦å·ä¿¡æ¯ï¼Œç®¡ç†ä½œç”¨åŸŸ
3. **ä»£ç ç”Ÿæˆ**ï¼šç”ŸæˆVMæŒ‡ä»¤ï¼Œå¡«å……ä»£ç æ®µå’Œæ•°æ®æ®µ

**å…³é”®è®¾è®¡**ï¼š
- **ç¬¦å·è¡¨**ï¼šç¼–è¯‘æ—¶çš„ä¿¡æ¯ä¸­å¿ƒ
- **æ•°æ®æ®µ**ï¼šå…¨å±€å˜é‡çš„å­˜å‚¨ç©ºé—´
- **ä»£ç æ®µ**ï¼šVMæŒ‡ä»¤çš„å­˜å‚¨ç©ºé—´
- **æ ˆæ®µ**ï¼šå±€éƒ¨å˜é‡çš„è¿è¡Œæ—¶ç©ºé—´

**ç¼–è¯‘ç»“æžœ**ï¼š
- **ç¬¦å·è¡¨**ï¼šåŒ…å«æ‰€æœ‰ç¬¦å·ä¿¡æ¯
- **æ•°æ®æ®µ**ï¼šåŒ…å«å…¨å±€å˜é‡
- **ä»£ç æ®µ**ï¼šåŒ…å«VMæŒ‡ä»¤
- **æ ˆæ®µ**ï¼šè¿è¡Œæ—¶åŠ¨æ€åˆ†é…

è¿™ç§è®¾è®¡ä½¿å¾—ç¼–è¯‘å™¨èƒ½å¤Ÿé«˜æ•ˆåœ°å°†Cä»£ç è½¬æ¢ä¸ºå¯æ‰§è¡Œçš„VMæŒ‡ä»¤ï¼
